#!/bin/bash

# REQUIRES:
#	i3
#	xdotool
#	coreutils
#	bash

max_len=80
i3-msg -t subscribe -m '["window","workspace"]' | while read line
do 
	name="$(xdotool getactivewindow getwindowname)"
	[ $? = 1 ] && name="Desktop"
	[ "${#name}" -gt $max_len ] && name="$(echo "$name" | cut -c -$max_len)""..."
	echo "$name"
done
