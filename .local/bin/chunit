#!/usr/bin/python

import math
import sys
import os
import re

if len(sys.argv) == 0:
	print("No arguments specified. Run again with :h for help.", file=sys.stderr)
	sys.exit(1)

flags = ""
expr = ""
in_expr = False

for a in sys.argv[1:]:
	if len(a) > 0:
		if not in_expr and a[0] == ":":
			flags += a[1:]
		else:
			in_expr = True
			expr += a + " "

if "h" in flags:
	print("Usage: %s [:hvsb] <expr>" % os.path.basename(sys.argv[0]))
	sys.exit(0)

mode_verbose = ("v" in flags)
mode_si = ("s" in flags)
mode_binary = ("b" in flags)

if mode_si and mode_binary:
	print("Binary (:b) and SI (:s) flags are not compatible.", file=sys.stderr)
	sys.exit(1)

parts = tuple(map(lambda a: a.strip(), re.split("(?: to |->|=>|=)", expr)))
if len(parts) < 2:
	print("Expression is not valid: no conversion specified")
	sys.exit(1)


